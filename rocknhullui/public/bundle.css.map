{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.html",
    "../src/Sidebar.html",
    "../src/Topbar.html",
    "../src/Point.html"
  ],
  "sourcesContent": [
    "<div ref:threedeediv></div>\n<Topbar ref:thetopbar\n  on:addPoint=\"addPoint()\"\n  on:buildhull=\"buildhull()\"\n  on:deleteAllPoint=\"deleteAllPoint()\"\n  on:importPoints=\"importPoints()\"\n  on:exportPoints=\"exportPoints()\"\n  on:exportHull=\"exportHull()\"\n  on:addRandomPoints=\"addRandomPoints()\"\n/>\n<Sidebar ref:sidebar/>\n\n<style>\n\n  ref:threedeediv {\n    position: fixed;\n    width: calc(100vw - 200px);\n    height: calc(100vh - 50px);\n    left: 0;\n    bottom: 0;\n    background-color: #AAF;\n  }\n\n</style>\n\n\n<script>\n  // import createRenderer from './createRenderer.js';\n  import rocknhull from 'rocknhull'\n  import Sidebar from './Sidebar.html'\n  import Topbar from './Topbar.html'\n\n  /**\n   * Helper function to triger the downloqd of a file\n   * @param  {String} filename\n   * @param  {String} text - content of the file\n   */\n  function download(filename, text) {\n    let element = document.createElement('a');\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    element.setAttribute('download', filename);\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  export default {\n    components: {\n      Sidebar,\n      Topbar\n    },\n\n    data() {\n      return {\n        rock: null,\n      }\n    },\n\n    oncreate() {\n      const threedeediv = this.refs.threedeediv\n      let rock = new rocknhull.Rocknhull(threedeediv)\n      this.set({rock: rock})\n    },\n\n    methods: {\n      addPoint(x=0, y=0, z=0) {\n        let rock = this.get().rock\n        let apc = rock.getAnchorPointCollection()\n        let hv = rock.getHullView()\n\n        // adding the point in the internal logic of rocknhull\n        let pointInfo = apc.add([x, y, z])\n        let anchorPoint = pointInfo.anchorPoint\n\n        // adding the UI for this point\n        const sidebar = this.refs.sidebar\n        let pointComponent = sidebar.addPoint(pointInfo.id)\n        pointComponent.set({\n          x: x,\n          y: y,\n          z: z\n        })\n\n        // bind some events\n        pointComponent.on('modified', function(data){\n          console.log('modified')\n          hv.deleteConvexHull()\n          let changedState = data.changedState\n\n          let changedStateKeys = Object.keys(changedState)\n\n          for (let i=0; i<changedStateKeys.length; i++) {\n            let key = changedStateKeys[i]\n            let value = changedState[key]\n\n            if (key === 'x') {\n              anchorPoint.setX(value)\n            }else if (key === 'y') {\n              anchorPoint.setY(value)\n            }else if (key === 'z') {\n              anchorPoint.setZ(value)\n            }else if (key === 'enabled'){\n              anchorPoint.enable(value)\n            } else {\n              // this is about symmetry\n              anchorPoint['enable' + key](value)\n            }\n\n          }\n\n\n          hv.updateAnchorPoints()\n        })\n\n        pointComponent.on('deleted', function(data){\n          hv.deleteConvexHull()\n          let pointId = data.pointId\n          apc.delete(pointId)\n          hv.updateAnchorPoints()\n        })\n\n        // showing a sphere\n        hv.updateAnchorPoints()\n\n        return pointComponent\n      },\n\n      addFromCSV (csvStr) {\n        let lines = csvStr.trim().split('\\n')\n        let listOfNewPoint = []\n\n        for (let i=0; i<lines.length; i++) {\n          let line = lines[i]\n\n          if (line[0] == '#') {\n            continue\n          }\n\n          let elem = line.split(',').map(elem => elem.trim())\n\n          let pointComponent = this.addPoint(\n            parseFloat(elem[0]),\n            parseFloat(elem[1]),\n            parseFloat(elem[2]),\n          )\n\n          pointComponent.set({\n            MirrorX: elem[4] === 'true',\n            MirrorY: elem[5] === 'true',\n            MirrorZ: elem[6] === 'true',\n            RadialMirrorX: elem[7] === 'true',\n            RadialMirrorY: elem[8] === 'true',\n            RadialMirrorZ: elem[9] === 'true',\n            RadialMirrorO: elem[10] === 'true',\n            enabled: elem[3] === 'true'\n          })\n        }\n\n      },\n\n\n      buildhull() {\n        let rock = this.get().rock\n        let hv = rock.getHullView()\n        hv.buildConvexHull()\n      },\n\n\n      deleteAllPoint() {\n        const sidebar = this.refs.sidebar\n        sidebar.deleteAll()\n\n        let rock = this.get().rock\n        let apc = rock.getAnchorPointCollection()\n        let hv = rock.getHullView()\n\n        apc.deleteAllAnchorPoints()\n        hv.updateAnchorPoints()\n        hv.deleteConvexHull()\n      },\n\n\n      importPoints() {\n        let that = this\n        let input = document.createElement('input');\n        input.type = \"file\"\n\n        input.addEventListener('change', function(e){\n          let files = e.target.files\n\n          for (let i=0; i<files.length; i++) {\n            let reader = new FileReader()\n\n            reader.onloadend = function(evt) {\n              let str = evt.target.result\n              that.addFromCSV(str)\n\n            }\n            reader.readAsText(files[i])\n          }\n\n        })\n\n        input.click()\n      },\n\n\n      exportPoints() {\n        let rock = this.get().rock\n        let apc = rock.getAnchorPointCollection()\n        let csvString = apc.getCSV()\n\n        if (csvString) {\n          download('rocknhull_points.csv', csvString)\n        } else {\n          alert('The scene does not contain any point.')\n        }\n      },\n\n\n      exportHull() {\n        let rock = this.get().rock\n        let hv = rock.getHullView()\n        let objString = hv.exportHullOBJ()\n\n        if (objString) {\n          download('rocknhull_hull.obj', objString)\n        } else {\n          alert('You must build the hull before downloading it.')\n        }\n      },\n\n\n      addRandomPoints() {\n        let promptAnswer = prompt(\"How many random points would you like to add?\")\n        let nbPoints = Math.min(Math.abs(parseInt(promptAnswer)), 100)\n\n        if(isNaN(nbPoints)) {\n          return\n        }\n\n        for (let i=0; i<nbPoints; i++) {\n          this.addPoint(\n            Math.random() * 100 - 50,\n            Math.random() * 100 - 50,\n            Math.random() * 100 - 50\n          )\n        }\n      }\n\n    }\n  }\n</script>\n",
    "<div ref:container class=\"container\">\n  {#if isEmpty}\n    <div class=\"placeholder\">\n      Add points from the menu bar\n    </div>\n  {/if}\n</div>\n\n\n<style>\n  .container {\n    position: fixed;\n    width: 255px;\n    height: calc(100vh - 50px);\n    bottom: 0;\n    right: 0;\n    background-color: #15777b;\n    overflow-y: scroll;\n  }\n\n  .placeholder {\n    color: #43a7ad;\n    font-size: 25px;\n    text-align: center;\n    height: fit-content;\n    width: 60%;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    position: absolute;\n    padding: 10%;\n    border: #3c9398 2px solid;\n    border-radius: 4px;\n    font-weight: 300;\n  }\n</style>\n\n\n<script>\n  import Point from './Point.html'\n\n  export default {\n    components: {\n      Point,\n    },\n\n    data() {\n      return {\n        isEmpty: true\n      };\n    },\n\n    oncreate() {\n      //const threedeediv = this.refs.threedeediv\n\n      //console.log(this)\n    },\n\n\n    methods: {\n\n      addPoint(pointId) {\n        this.set({isEmpty: false})\n\n        let pointComponent = new Point({\n          target: this.refs.container,\n          data: {\n            pointId: pointId\n          }\n        })\n\n        // update the placeholder\n        let that = this\n        pointComponent.on('deleted', function(data){\n          that.set({\n            isEmpty: that.refs.container.childElementCount === 1\n          })\n        })\n\n        return pointComponent\n      },\n\n\n      deleteAll() {\n        if (this.get().isEmpty) {\n          return\n        }\n\n        let myNode = this.refs.container\n        while (myNode.firstChild) {\n            myNode.removeChild(myNode.firstChild)\n        }\n\n        this.set({isEmpty: true})\n      }\n\n    }\n  }\n</script>\n",
    "<div class=\"container\">\n  <div class=\"toolbar\">\n\n    <div class=\"logo\">\n      <a href=\"https://github.com/jonathanlurie/rocknhull\" target=\"_blank\">\n        <img  src=\"images/logo_white.png\"/>\n      </a>\n    </div>\n\n    <div class=\"bt\" on:click=\"fire('addPoint')\">\n      Add point\n    </div>\n\n    <div class=\"bt\" on:click=\"fire('addRandomPoints')\">\n      Add random\n    </div>\n\n    <div class=\"bt\" on:click=\"fire('importPoints')\">\n      Import points\n    </div>\n\n    <div class=\"bt\" on:click=\"fire('exportPoints')\">\n      Export points\n    </div>\n\n    <div class=\"separator\"></div>\n\n    <div class=\"bt\" on:click=\"fire('buildhull')\">\n      Build hull\n    </div>\n\n    <div class=\"bt\" on:click=\"fire('exportHull')\">\n      Export hull\n    </div>\n\n    <div class=\"separator\"></div>\n\n    <div class=\"bt warning\" on:click=\"fire('deleteAllPoint')\">\n      Delete all\n    </div>\n\n  </div>\n\n</div>\n\n\n<style>\n  .container {\n    position: fixed;\n    display: inline-flex;\n    width: 100vw;\n    height: 50px;\n    top: 0;\n    background-color: #339ba0;\n  }\n\n  .toolbar {\n    display: inline-flex;\n    margin: 7px;\n    overflow-x: auto;\n  }\n\n  .bt {\n    width: 150px;\n    height: 35px;\n    background: #1e777b;\n    font-size: 17px;\n    color: #FFF;\n    line-height: 35px;\n    text-align: center;\n    cursor: pointer;\n    margin: 0 5px 0 5px;\n    user-select: none;\n    text-transform: uppercase;\n    font-weight: 300;\n    transition: all 0.2s;\n  }\n\n  .bt:hover {\n    background: #353535;\n  }\n\n  .separator {\n    width: 1px;\n    height: 35px;\n    line-height: 35px;\n    margin: 0 15px;\n    border-left: dashed #09777b 0.5px;\n  }\n\n  .logo {\n    height: 100%;\n    width: fit-content;\n    margin-right: 20px;\n  }\n\n  .logo img {\n    height: 100%;\n    width: auto;\n  }\n\n  .warning {\n    background: #ca1b1b;\n  }\n</style>\n\n\n\n<script>\n\n  export default {\n\n    data() {\n      return {\n        thing: \"thing 0\"\n      };\n    },\n\n    oncreate() {\n      this.set({'thing': \"thing 1\"})\n\n    },\n\n\n    methods: {\n      /*\n      addPoint() {\n        console.log('HELLO')\n      },\n      */\n\n    }\n  }\n</script>\n",
    "<!--\n  Fires events:\n    - 'modified' with arg {pointId: String, changedState: Object}\n    - 'deleted' with arg {pointId: String}\n\n-->\n\n\n<div ref:container class=\"container\">\n  <div class=\"setting-title\">Position</div>\n  <div class=\"row-of-3\">\n    <input type=\"number\" step=\"0.1\" bind:value=x>\n    <input type=\"number\" step=\"0.1\" bind:value=y>\n    <input type=\"number\" step=\"0.1\" bind:value=z>\n  </div>\n\n  <div class=\"setting-title\">Symmetry</div>\n  <div class=\"row-of-7\">\n    <div class=\"labeled-checkbox\">|x <input type=\"checkbox\" bind:checked=MirrorX></div>\n    <div class=\"labeled-checkbox\">|y <input type=\"checkbox\" bind:checked=MirrorY></div>\n    <div class=\"labeled-checkbox\">|z <input type=\"checkbox\" bind:checked=MirrorZ></div>\n    <div class=\"labeled-checkbox\">øx <input type=\"checkbox\" bind:checked=RadialMirrorX></div>\n    <div class=\"labeled-checkbox\">øy <input type=\"checkbox\" bind:checked=RadialMirrorY></div>\n    <div class=\"labeled-checkbox\">øz <input type=\"checkbox\" bind:checked=RadialMirrorZ></div>\n    <div class=\"labeled-checkbox\">øo <input type=\"checkbox\" bind:checked=RadialMirrorO></div>\n  </div>\n\n  <div class=\"row-of-2\">\n    {#if enabled}\n    <div ref:disableBt class=\"rectBt\" on:click=\"disable()\">\n      Disable\n    </div>\n    {:else}\n    <div ref:enableBt class=\"rectBt\" on:click=\"enable()\">\n      Enable\n    </div>\n    {/if}\n\n\n    <div ref:deleteBt class=\"rectBt\" on:click=\"destroy()\">\n      Delete\n    </div>\n  </div>\n</div>\n\n\n<style>\n\n  input {\n    border: none;\n    text-align: center;\n  }\n\n  .container {\n    /*width: 100%;*/\n    margin-bottom: 15px;\n    margin-top: 15px;\n    background: #2c9ba1;\n    padding: 10px;\n  }\n\n  .setting-title {\n    text-align: center;\n    width: 100%;\n    /*border-top: dashed 1px rgba(0, 0, 0, 0.1);*/\n    font-size: 16px;\n    padding: 10px 0 5px 0;\n    color: #FFF;\n  }\n\n  .row-of-2 {\n    display: grid;\n    grid-template-columns: 47.5% 47.5%;\n    grid-gap: 5%;\n  }\n\n  .row-of-3 {\n    display: grid;\n    grid-template-columns: 30% 30% 30%;\n    grid-gap: 5%;\n  }\n\n  .row-of-4 {\n    display: grid;\n    grid-template-columns: 22% 22% 22% 22%;\n    grid-gap: 4%;\n  }\n\n  .row-of-7 {\n    display: grid;\n    grid-template-columns: 12% 12% 12% 12% 12% 12% 12%;\n    grid-gap: 2.5%;\n  }\n\n  .labeled-checkbox {\n    text-align: center;\n    color: #FFF;\n  }\n\n  .rectBt{\n    width: 100%;\n    height: 35px;\n    font-size: 20px;\n    color: #FFF;\n    line-height: 35px;\n    text-align: center;\n    cursor: pointer;\n  }\n\n  ref:deleteBt{\n    background: #ca1b1b;\n  }\n\n  ref:disableBt{\n    background: #ea8d00;\n  }\n\n  ref:enableBt{\n    background: #05d227;\n  }\n\n\n</style>\n\n\n<script>\n\n  function stringToColour(str) {\n    let hash = 0\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash)\n    }\n\n    let colour = '#'\n    for (let i = 0; i < 3; i++) {\n      let value = (hash >> (i * 8)) & 0xFF\n      colour += ('00' + value.toString(16)).substr(-2)\n    }\n    return colour\n  }\n\n\n  export default {\n    data() {\n      return {\n        x: 0,\n        y: 0,\n        z: 0,\n\n        // those have their first letter capitalized to match the suffix of the\n        // corresponding Rocknhull method, which are camel-cased\n        MirrorX: false,\n        MirrorY: false,\n        MirrorZ: false,\n        RadialMirrorX: false,\n        RadialMirrorY: false,\n        RadialMirrorZ: false,\n        RadialMirrorO: false,\n\n        enabled: true\n\n      }\n    },\n\n    onstate({ changed, current, previous }) {\n      // this fires before oncreate, and on every state change.\n      // the first time it runs, `previous` is undefined\n      if (previous === undefined) {\n        return\n      }\n\n\n      let changedState = {}\n      let stateKeys = Object.keys(previous)\n\n      for (let i=0; i<stateKeys.length; i++) {\n        let k = stateKeys[i]\n        if (previous[k] !== current[k]) {\n          changedState[k] = current[k]\n        }\n      }\n\n      let eventArg = {\n        pointId: this.get().pointId,\n        changedState: changedState\n      }\n\n      this.fire('modified', eventArg)\n    },\n\n    oncreate() {\n\n      const container = this.refs.container\n      container.style.borderRight = stringToColour(this.get().pointId.toString()) + ' 10px solid'\n    },\n\n    methods: {\n      disable: function() {\n        const container = this.refs.container\n        container.classList.add('grey-background')\n\n        this.set({ enabled: false })\n      },\n\n      enable: function() {\n        const container = this.refs.container\n        container.classList.remove('grey-background')\n\n        this.set({ enabled: true })\n      }\n    },\n\n    ondestroy() {\n      // TODO: throw an event to remove the 3D point\"\n      this.fire('deleted', {pointId: this.get().pointId})\n    }\n\n\n\n  }\n</script>\n"
  ],
  "names": [],
  "mappings": "AAcE,qCAAgB,CAAC,AACf,QAAQ,CAAE,KAAK,CACf,KAAK,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAC1B,MAAM,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAC1B,IAAI,CAAE,CAAC,CACP,MAAM,CAAE,CAAC,CACT,gBAAgB,CAAE,IAAI,AACxB,CAAC;ACXD,UAAU,eAAC,CAAC,AACV,QAAQ,CAAE,KAAK,CACf,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAC1B,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,CAAC,CACR,gBAAgB,CAAE,OAAO,CACzB,UAAU,CAAE,MAAM,AACpB,CAAC,AAED,YAAY,eAAC,CAAC,AACZ,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,MAAM,CAClB,MAAM,CAAE,WAAW,CACnB,KAAK,CAAE,GAAG,CACV,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CACT,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,GAAG,CACZ,MAAM,CAAE,OAAO,CAAC,GAAG,CAAC,KAAK,CACzB,aAAa,CAAE,GAAG,CAClB,WAAW,CAAE,GAAG,AAClB,CAAC;ACWD,UAAU,eAAC,CAAC,AACV,QAAQ,CAAE,KAAK,CACf,OAAO,CAAE,WAAW,CACpB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,GAAG,CAAE,CAAC,CACN,gBAAgB,CAAE,OAAO,AAC3B,CAAC,AAED,QAAQ,eAAC,CAAC,AACR,OAAO,CAAE,WAAW,CACpB,MAAM,CAAE,GAAG,CACX,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,GAAG,eAAC,CAAC,AACH,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,CACX,WAAW,CAAE,IAAI,CACjB,UAAU,CAAE,MAAM,CAClB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CACnB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,SAAS,CACzB,WAAW,CAAE,GAAG,CAChB,UAAU,CAAE,GAAG,CAAC,IAAI,AACtB,CAAC,AAED,kBAAG,MAAM,AAAC,CAAC,AACT,UAAU,CAAE,OAAO,AACrB,CAAC,AAED,UAAU,eAAC,CAAC,AACV,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,IAAI,CACjB,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,WAAW,CAAE,MAAM,CAAC,OAAO,CAAC,KAAK,AACnC,CAAC,AAED,KAAK,eAAC,CAAC,AACL,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,WAAW,CAClB,YAAY,CAAE,IAAI,AACpB,CAAC,AAED,oBAAK,CAAC,GAAG,eAAC,CAAC,AACT,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACb,CAAC,AAED,QAAQ,eAAC,CAAC,AACR,UAAU,CAAE,OAAO,AACrB,CAAC;ACvDD,KAAK,eAAC,CAAC,AACL,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,MAAM,AACpB,CAAC,AAED,UAAU,eAAC,CAAC,AAEV,aAAa,CAAE,IAAI,CACnB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,OAAO,CACnB,OAAO,CAAE,IAAI,AACf,CAAC,AAED,cAAc,eAAC,CAAC,AACd,UAAU,CAAE,MAAM,CAClB,KAAK,CAAE,IAAI,CAEX,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CACrB,KAAK,CAAE,IAAI,AACb,CAAC,AAED,SAAS,eAAC,CAAC,AACT,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,KAAK,CAAC,KAAK,CAClC,QAAQ,CAAE,EAAE,AACd,CAAC,AAED,SAAS,eAAC,CAAC,AACT,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAClC,QAAQ,CAAE,EAAE,AACd,CAAC,AAQD,SAAS,eAAC,CAAC,AACT,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAClD,QAAQ,CAAE,IAAI,AAChB,CAAC,AAED,iBAAiB,eAAC,CAAC,AACjB,UAAU,CAAE,MAAM,CAClB,KAAK,CAAE,IAAI,AACb,CAAC,AAED,sBAAO,CAAC,AACN,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,CACX,WAAW,CAAE,IAAI,CACjB,UAAU,CAAE,MAAM,CAClB,MAAM,CAAE,OAAO,AACjB,CAAC,AAED,mCAAY,CAAC,AACX,UAAU,CAAE,OAAO,AACrB,CAAC,AAED,oCAAa,CAAC,AACZ,UAAU,CAAE,OAAO,AACrB,CAAC,AAED,mCAAY,CAAC,AACX,UAAU,CAAE,OAAO,AACrB,CAAC"
}